<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Operation Child Care Project - Eligibility Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Hide number input arrows */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- Eligibility Calculator Section -->
    <main class="w-full max-w-4xl mx-auto">
        <div class="bg-white p-6 sm:p-8 md:p-12 rounded-2xl shadow-2xl">
            <div class="text-center mb-10">
                <h1 class="text-3xl md:text-4xl font-bold text-green-800">Eligibility Calculator</h1>
                <p class="text-gray-600 mt-4 max-w-2xl mx-auto">Use our calculator to see which child care assistance programs you may be eligible for. This is an estimate and not a guarantee of assistance.</p>
            </div>
            <form id="eligibility-form" class="space-y-8">
                <!-- Step 1: Installation -->
                <div id="step-1">
                    <label for="installation" class="block text-xl font-semibold text-gray-800 mb-2">1. Select Your Installation</label>
                    <select id="installation" name="installation" class="mt-1 block w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 text-lg">
                        <option value="">-- Select an Installation --</option>
                    </select>
                </div>

                <!-- Step 2: Military Family Type -->
                <div id="step-2" class="hidden">
                    <label for="family-type" class="block text-xl font-semibold text-gray-800 mb-2">2. Select Your Military Family Type</label>
                    <select id="family-type" name="family-type" class="mt-1 block w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 text-lg">
                         <option value="">-- Select a Family Type --</option>
                    </select>
                </div>

                <!-- Step 3: Sub Family Type -->
                <div id="step-3" class="hidden">
                    <label for="sub-family-type" class="block text-xl font-semibold text-gray-800 mb-2">3. Select Your Specific Family Situation</label>
                    <select id="sub-family-type" name="sub-family-type" class="mt-1 block w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 text-lg">
                         <option value="">-- Select a Situation --</option>
                    </select>
                </div>
                
                <!-- Step 4: School Age Children -->
                <div id="step-4" class="hidden">
                    <label class="block text-xl font-semibold text-gray-800 mb-2">4. Do you have school-age children (Ages 5-12)?</label>
                    <div class="flex items-center space-x-6 mt-2">
                       <label class="flex items-center text-lg"><input type="radio" name="school-age" value="Yes" class="h-5 w-5 text-green-600 focus:ring-green-500 border-gray-300"> <span class="ml-2">Yes</span></label>
                       <label class="flex items-center text-lg"><input type="radio" name="school-age" value="No" class="h-5 w-5 text-green-600 focus:ring-green-500 border-gray-300"> <span class="ml-2">No</span></label>
                    </div>
                </div>

                <div class="text-center pt-4">
                    <button type="submit" id="calculate-btn" class="bg-green-600 text-white py-4 px-10 rounded-full text-xl font-bold hover:bg-green-700 transition duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>Calculate Eligibility</button>
                </div>
            </form>
            <div id="eligibility-result" class="mt-12" role="alert"></div>
        </div>
        <div class="text-center mt-6">
            <p class="text-xs text-gray-500">&copy; 2025 The Operation Child Care Project. All Rights Reserved.</p>
        </div>
    </main>

    <script>
        // --- DATA FROM SPREADSHEETS ---
        // This data is embedded here to make the calculator self-contained.
        // In a real-world application, this would likely be loaded from a database or API.

        const installationsData = [
            // A subset of data for demonstration. A full implementation would have all 700+ rows.
            { "Installation": "Fort Novosel", "State": "Alabama", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "Installation": "Redstone Arsenal", "State": "Alabama", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "Installation": "Joint Base Elmendorf-Richardson", "State": "Alaska", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Eligible", "CCYH": "Eligible" },
            { "Installation": "Davis-Monthan Air Force Base", "State": "Arizona", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "Installation": "Naval Base San Diego", "State": "California", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "Installation": "Camp Pendleton", "State": "California", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "Installation": "United States Air Force Academy", "State": "Colorado", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "Installation": "Naval Submarine Base New London", "State": "Connecticut", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" }
        ];

        const masterFamilyTypes = [ "CDC Program Staff", "Active Duty Combat Wounded Warrior", "Active Duty Military", "Guard On Active Duty", "Reserves On Active Duty", "DoD Civilian", "Coast Guard Civilian", "DoD Contractor", "Gold Star Spouse (Combat Related)", "Other Eligible" ];
        
        const subFamilyTypes = [
            // This list is now more comprehensive based on the provided CSV data.
            { "Family_Type": "CDC Program Staff", "Priority_Type": "Single CDC Program Staff" },
            { "Family_Type": "CDC Program Staff", "Priority_Type": "With Working Spouse" },
            { "Family_Type": "CDC Program Staff", "Priority_Type": "With Student Spouse" },
            { "Family_Type": "CDC Program Staff", "Priority_Type": "With Spouse Seeking Employment" },
            { "Family_Type": "CDC Program Staff", "Priority_Type": "With Non-Working Spouse" },

            { "Family_Type": "Active Duty Combat Wounded Warrior", "Priority_Type": "Active Duty Combat Wounded Warrior" },

            { "Family_Type": "Active Duty Military", "Priority_Type": "Dual Active Duty Military" },
            { "Family_Type": "Active Duty Military", "Priority_Type": "Single Active Duty Military" },
            { "Family_Type": "Active Duty Military", "Priority_Type": "With Full-Time Working Spouse" },
            { "Family_Type": "Active Duty Military", "Priority_Type": "With Part-Time Working Spouse" },
            { "Family_Type": "Active Duty Military", "Priority_Type": "With Spouse Seeking Employment" },
            { "Family_Type": "Active Duty Military", "Priority_Type": "With Full-Time Student Spouse" },
            { "Family_Type": "Active Duty Military", "Priority_Type": "With Part-Time Student Spouse" },
            { "Family_Type": "Active Duty Military", "Priority_Type": "With Non-Working Spouse" },

            { "Family_Type": "Guard On Active Duty", "Priority_Type": "Dual Guard and Reserve on Active Duty" },
            { "Family_Type": "Guard On Active Duty", "Priority_Type": "Single Guard and Reserve on Active Duty" },
            { "Family_Type": "Guard On Active Duty", "Priority_Type": "With Full-Time Working Spouse" },
            { "Family_Type": "Guard On Active Duty", "Priority_Type": "With Part-Time Working Spouse" },
            { "Family_Type": "Guard On Active Duty", "Priority_Type": "With Spouse Seeking Employment" },
            { "Family_Type": "Guard On Active Duty", "Priority_Type": "With Full-Time Student Spouse" },
            { "Family_Type": "Guard On Active Duty", "Priority_Type": "With Part-Time Student Spouse" },
            { "Family_Type": "Guard On Active Duty", "Priority_Type": "With Non-Working Spouse" },

            { "Family_Type": "Reserves On Active Duty", "Priority_Type": "Dual Guard and Reserve on Active Duty" },
            { "Family_Type": "Reserves On Active Duty", "Priority_Type": "Single Guard and Reserve on Active Duty" },
            { "Family_Type": "Reserves On Active Duty", "Priority_Type": "With Full-Time Working Spouse" },
            { "Family_Type": "Reserves On Active Duty", "Priority_Type": "With Part-Time Working Spouse" },
            { "Family_Type": "Reserves On Active Duty", "Priority_Type": "With Spouse Seeking Employment" },
            { "Family_Type": "Reserves On Active Duty", "Priority_Type": "With Full-Time Student Spouse" },
            { "Family_Type": "Reserves On Active Duty", "Priority_Type": "With Part-Time Student Spouse" },
            { "Family_Type": "Reserves On Active Duty", "Priority_Type": "With Non-Working Spouse" },

            { "Family_Type": "DoD Civilian", "Priority_Type": "Dual DoD Civilian/Coast Guard Civilian" },
            { "Family_Type": "DoD Civilian", "Priority_Type": "Single DoD Civilian/Coast Guard Civilian" },
            { "Family_Type": "DoD Civilian", "Priority_Type": "With Full-Time Working Spouse" },
            { "Family_Type": "DoD Civilian", "Priority_Type": "With Part-Time Working Spouse" },
            { "Family_Type": "DoD Civilian", "Priority_Type": "DoD Civilian w/Spouse Seeking Employment" },
            { "Family_Type": "DoD Civilian", "Priority_Type": "With Full-Time Student Spouse" },
            { "Family_Type": "DoD Civilian", "Priority_Type": "With Part-Time Student Spouse" },
            { "Family_Type": "DoD Civilian", "Priority_Type": "With Non-Working Spouse" },
            
            { "Family_Type": "Coast Guard Civilian", "Priority_Type": "Dual DoD Civilian/Coast Guard Civilian" },
            { "Family_Type": "Coast Guard Civilian", "Priority_Type": "Single DoD Civilian/Coast Guard Civilian" },
            { "Family_Type": "Coast Guard Civilian", "Priority_Type": "With Full-Time Working Spouse" },
            { "Family_Type": "Coast Guard Civilian", "Priority_Type": "With Part-Time Working Spouse" },
            { "Family_Type": "Coast Guard Civilian", "Priority_Type": "DoD Civilian w/Spouse Seeking Employment" },
            { "Family_Type": "Coast Guard Civilian", "Priority_Type": "With Full-Time Student Spouse" },
            { "Family_Type": "Coast Guard Civilian", "Priority_Type": "With Part-Time Student Spouse" },
            { "Family_Type": "Coast Guard Civilian", "Priority_Type": "With Non-Working Spouse" },

            { "Family_Type": "DoD Contractor", "Priority_Type": "Dual DoD Contractor" },
            { "Family_Type": "DoD Contractor", "Priority_Type": "Single DoD Contractor" },
            { "Family_Type": "DoD Contractor", "Priority_Type": "With Full-Time Working Spouse" },
            { "Family_Type": "DoD Contractor", "Priority_Type": "With Part-Time Working Spouse" },
            { "Family_Type": "DoD Contractor", "Priority_Type": "With Spouse Seeking Employment" },
            { "Family_Type": "DoD Contractor", "Priority_Type": "With Full-Time Student Spouse" },
            { "Family_Type": "DoD Contractor", "Priority_Type": "With Non-Working Spouse" },

            { "Family_Type": "Gold Star Spouse (Combat Related)", "Priority_Type": "Gold Star Spouse (Combat Related)-Working" },
            { "Family_Type": "Gold Star Spouse (Combat Related)", "Priority_Type": "Gold Star Spouse (Combat Related)-Student" },
            { "Family_Type": "Gold Star Spouse (Combat Related)", "Priority_Type": "Gold Star Spouse (Combat Related)-Seeking Employment" },
            { "Family_Type": "Gold Star Spouse (Combat Related)", "Priority_Type": "Gold Star Spouse (Combat Related)-Non-working" },

            { "Family_Type": "Other Eligible", "Priority_Type": "Military Retiree" },
            { "Family_Type": "Other Eligible", "Priority_Type": "Deactivated Guard/Reserve Personnel or Inactive Guard/Reserve in a Training Status" }
        ];

        const familyTypeEligibility = [
            // A more complete subset of data for demonstration.
            { "military_family_type": "Single CDC Program Staff", "school_age": "No", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Not Eligible", "MCCYN": "Not Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "military_family_type": "Single CDC Program Staff", "school_age": "Yes", "OCCP": "Eligible", "CDC": "Not Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Not Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "military_family_type": "Active Duty Combat Wounded Warrior", "school_age": "No", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Not Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Eligible", "CCYH": "Eligible" },
            { "military_family_type": "Active Duty Combat Wounded Warrior", "school_age": "Yes", "OCCP": "Eligible", "CDC": "Not Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Eligible", "CCYH": "Eligible" },
            { "military_family_type": "Dual Active Duty Military", "school_age": "No", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Not Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Eligible", "CCYH": "Eligible" },
            { "military_family_type": "Dual Active Duty Military", "school_age": "Yes", "OCCP": "Eligible", "CDC": "Not Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Eligible", "CCYH": "Eligible" },
            { "military_family_type": "Single Active Duty Military", "school_age": "No", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Not Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Eligible", "CCYH": "Eligible" },
            { "military_family_type": "Single Active Duty Military", "school_age": "Yes", "OCCP": "Eligible", "CDC": "Not Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Eligible", "CCYH": "Eligible" },
            { "military_family_type": "With Non-Working Spouse", "school_age": "No", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Not Eligible", "SAC": "Not Eligible", "MCCYN": "Not Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "military_family_type": "With Non-Working Spouse", "school_age": "Yes", "OCCP": "Eligible", "CDC": "Not Eligible", "FCC": "Not Eligible", "SAC": "Eligible", "MCCYN": "Not Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "military_family_type": "Military Retiree", "school_age": "No", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Not Eligible", "MCCYN": "Not Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "military_family_type": "Military Retiree", "school_age": "Yes", "OCCP": "Eligible", "CDC": "Not Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Not Eligible", "MCCYN_PLUS": "Not Eligible", "CCYH": "Not Eligible" },
            { "military_family_type": "Gold Star Spouse (Combat Related)-Working", "school_age": "No", "OCCP": "Eligible", "CDC": "Eligible", "FCC": "Eligible", "SAC": "Not Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Eligible", "CCYH": "Eligible" },
            { "military_family_type": "Gold Star Spouse (Combat Related)-Working", "school_age": "Yes", "OCCP": "Eligible", "CDC": "Not Eligible", "FCC": "Eligible", "SAC": "Eligible", "MCCYN": "Eligible", "MCCYN_PLUS": "Eligible", "CCYH": "Eligible" }
        ];

        const programInfo = {
            "OCCP": { "name": "Operation Child Care Project (OCCP)", "description": "The only national non-profit dedicated exclusively to child care access for military families offering free case management services to DoD affiliated families.", "learnMore": "https://www.occproject.org/", "signUp": "https://wkf.ms/4dvVT95" },
            "CDC": { "name": "Child Development Centers (CDC)", "description": "DoD-operated child care centers offering an educational care environment for infants through Pre-K aged children.", "learnMore": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome/military-operated-child-care-programs", "signUp": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome#/" },
            "FCC": { "name": "Family Child Care (FCC)", "description": "DoD-licensed independent contractors offering an in-home educational care environment, on or off an installation.", "learnMore": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome/military-operated-child-care-programs", "signUp": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome#/" },
            "SAC": { "name": "School Age Care (SAC)", "description": "DoD-operated before and after school programs for school-aged children.", "learnMore": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome/military-operated-child-care-programs", "signUp": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome#/" },
            "MCCYN": { "name": "Military Child Care in Your Neighborhood (MCCYN)", "description": "A subsidy program for civilian center-based or in-home licensed care when on-installation care is unavailable. Also known as Military Fee Assistance.", "learnMore": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome/mccyn", "signUp": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome#/" },
            "MCCYN_PLUS": { "name": "MCCYN-PLUS", "description": "An enhanced subsidy program available in select states with a demonstrated need for additional child care options.", "learnMore": "https://www.militaryonesource.mil/parenting/child-care/mccyn-plus-child-care-program/", "signUp": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome#/" },
            "CCYH": { "name": "Child Care in Your Home (CCYH)", "description": "A pilot program providing fee assistance for in-home child care providers, available in limited locations.", "learnMore": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome/ccyh", "signUp": "https://public.militarychildcare.csd.disa.mil/mcc-central/mcchome#/" }
        };

        // --- CALCULATOR LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {

            // Form elements
            const form = document.getElementById('eligibility-form');
            const installationSelect = document.getElementById('installation');
            const familyTypeSelect = document.getElementById('family-type');
            const subFamilyTypeSelect = document.getElementById('sub-family-type');
            const schoolAgeRadios = document.querySelectorAll('input[name="school-age"]');
            const calculateBtn = document.getElementById('calculate-btn');
            const resultDiv = document.getElementById('eligibility-result');

            // Populate initial dropdowns
            installationsData.forEach(inst => {
                const option = document.createElement('option');
                option.value = inst.Installation;
                option.textContent = `${inst.Installation}, ${inst.State}`;
                installationSelect.appendChild(option);
            });

            masterFamilyTypes.forEach(type => {
                const option = document.createElement('option');
                option.value = type;
                option.textContent = type;
                familyTypeSelect.appendChild(option);
            });

            // Form step logic
            installationSelect.addEventListener('change', () => {
                if (installationSelect.value) {
                    document.getElementById('step-2').classList.remove('hidden');
                } else {
                    document.getElementById('step-2').classList.add('hidden');
                }
                // Hide subsequent steps when changing a previous one
                document.getElementById('step-3').classList.add('hidden');
                document.getElementById('step-4').classList.add('hidden');
                subFamilyTypeSelect.innerHTML = '<option value="">-- Select a Situation --</option>';
                Array.from(schoolAgeRadios).forEach(r => r.checked = false);
                checkFormCompletion();
            });

            familyTypeSelect.addEventListener('change', () => {
                const selectedFamilyType = familyTypeSelect.value;
                subFamilyTypeSelect.innerHTML = '<option value="">-- Select a Situation --</option>';
                
                if (selectedFamilyType) {
                    const relevantSubTypes = subFamilyTypes.filter(st => st.Family_Type === selectedFamilyType);
                    if(relevantSubTypes.length > 0) {
                        relevantSubTypes.forEach(st => {
                            const option = document.createElement('option');
                            option.value = st.Priority_Type;
                            option.textContent = st.Priority_Type;
                            subFamilyTypeSelect.appendChild(option);
                        });
                        document.getElementById('step-3').classList.remove('hidden');
                    } else {
                        document.getElementById('step-3').classList.add('hidden');
                    }
                } else {
                     document.getElementById('step-3').classList.add('hidden');
                }
                document.getElementById('step-4').classList.add('hidden');
                Array.from(schoolAgeRadios).forEach(r => r.checked = false);
                checkFormCompletion();
            });

            subFamilyTypeSelect.addEventListener('change', () => {
                 if (subFamilyTypeSelect.value) {
                    document.getElementById('step-4').classList.remove('hidden');
                } else {
                    document.getElementById('step-4').classList.add('hidden');
                }
                Array.from(schoolAgeRadios).forEach(r => r.checked = false);
                checkFormCompletion();
            });
            
            schoolAgeRadios.forEach(radio => radio.addEventListener('change', checkFormCompletion));

            function checkFormCompletion() {
                const schoolAgeSelected = Array.from(schoolAgeRadios).some(r => r.checked);
                if (installationSelect.value && familyTypeSelect.value && subFamilyTypeSelect.value && schoolAgeSelected) {
                    calculateBtn.disabled = false;
                } else {
                    calculateBtn.disabled = true;
                }
            }


            // Form submission
            form.addEventListener('submit', (e) => {
                e.preventDefault();

                const selectedInstallationName = installationSelect.value;
                const selectedSubFamilyType = subFamilyTypeSelect.value;
                const selectedSchoolAge = document.querySelector('input[name="school-age"]:checked').value;

                const installationRules = installationsData.find(inst => inst.Installation === selectedInstallationName);
                const familyRules = familyTypeEligibility.find(ft => ft.military_family_type === selectedSubFamilyType && ft.school_age === selectedSchoolAge);

                resultDiv.innerHTML = ''; // Clear previous results

                if (!installationRules || !familyRules) {
                    resultDiv.innerHTML = `<div class="text-center p-6 bg-red-100 border border-red-200 rounded-lg"><h3 class="text-2xl font-bold text-red-800">Calculation Error</h3><p class="mt-2 text-red-700">We couldn't determine eligibility with the selected options. This may be because the specific combination is not in our database. Please try different selections or contact us for assistance.</p></div>`;
                    return;
                }

                const finalEligibility = {};
                const programKeys = Object.keys(programInfo);

                programKeys.forEach(key => {
                    if (installationRules[key] === 'Eligible' && familyRules[key] === 'Eligible') {
                        finalEligibility[key] = 'Eligible';
                    } else {
                        finalEligibility[key] = 'Not Eligible';
                    }
                });

                renderResults(finalEligibility);
            });

            function renderResults(eligibility) {
                const eligiblePrograms = Object.keys(eligibility).filter(key => eligibility[key] === 'Eligible');
                
                let html = `<h3 class="text-3xl font-bold text-center text-gray-800 mb-8">Your Eligibility Results</h3>`;

                if (eligiblePrograms.length > 0) {
                     html += `<p class="text-center text-lg text-gray-600 mb-8">Based on your selections, you may be eligible for the following programs:</p>`;
                     html += `<div class="grid md:grid-cols-2 gap-6">`;
                     eligiblePrograms.forEach(key => {
                        const program = programInfo[key];
                        html += `
                            <div class="bg-green-50 border border-green-200 rounded-lg p-6 flex flex-col">
                                <h4 class="text-2xl font-bold text-green-800">${program.name}</h4>
                                <p class="text-gray-700 mt-2 flex-grow">${program.description}</p>
                                <div class="mt-6 flex flex-wrap gap-3">
                                    ${program.learnMore ? `<a href="${program.learnMore}" target="_blank" class="bg-white text-green-700 py-2 px-4 rounded-full font-semibold border border-green-600 hover:bg-green-100 transition duration-300">Learn More</a>` : ''}
                                    ${program.signUp ? `<a href="${program.signUp}" target="_blank" class="bg-green-600 text-white py-2 px-4 rounded-full font-semibold hover:bg-green-700 transition duration-300">Sign Up</a>` : ''}
                                </div>
                            </div>
                        `;
                     });
                     html += `</div>`;
                } else {
                    html += `<div class="text-center p-8 bg-yellow-50 border border-yellow-200 rounded-lg">
                                <h4 class="text-2xl font-bold text-yellow-800">No Programs Found</h4>
                                <p class="mt-2 text-yellow-700 text-lg">Based on your selections, you may not be eligible for the programs in our calculator. We recommend contacting us directly to discuss your specific situation.</p>
                             </div>`;
                }
                
                html += `<p class="text-center text-sm text-gray-500 mt-10"><strong>Disclaimer:</strong> This calculator provides an estimate for informational purposes only and does not guarantee eligibility or assistance. Final eligibility is determined upon official application and verification.</p>`;

                resultDiv.innerHTML = html;
            }
        });

    </script>

</body>
</html>
